<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>LOLA-GAME</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            font-family: 'Press Start 2P', cursive;
            background-color: #f0f0f0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }
        canvas {
            display: block;
            background-color: #e0e0e0;
            border-bottom: 2px solid lightgray;
        }
        .game-over-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-size: 24px;
            z-index: 10;
            display: none;
        }
        .game-over-content {
            text-align: center;
            padding: 20px;
            border-radius: 10px;
            background-color: rgba(0, 0, 0, 0.9);
        }
        #restartButton {
            margin-top: 20px;
            padding: 10px 20px;
            font-size: 16px;
            color: white;
            background-color: #4CAF50;
            border: none;
            cursor: pointer;
            border-radius: 5px;
            transition: background-color 0.3s ease;
        }
        #restartButton:hover {
            background-color: #45a049;
        }
    </style>
</head>
<body>

<canvas id="gameCanvas"></canvas>

<div class="game-over-overlay" id="gameOverOverlay">
    <div class="game-over-content">
        <h2 id="gameOverText">Game Over!</h2>
        <p>Puntuación: <span id="finalScore">0</span></p>
        <button id="restartButton">Reiniciar</button>
    </div>
</div>

<script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    const gameOverOverlay = document.getElementById('gameOverOverlay');
    const restartButton = document.getElementById('restartButton');
    const finalScore = document.getElementById('finalScore');

    let gameSpeed = 5; // Modo fácil fijo
    let gameRunning = false;
    let score = 0;
    let gameOver = false;
    let animationFrameId;

    // Tamaño de canvas alineado al centro
    const resizeCanvas = () => {
        const width = Math.min(window.innerWidth, 800);
        const height = Math.min(window.innerHeight, 400);
        canvas.width = width;
        canvas.height = height;
        horizonHeight = height - 50;
    };

    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();

    // --- Imágenes ---
    const trexImg = new Image();
    trexImg.src = 'lola.gif';

    const cactusImages = [
        'brahma.png',
        'quilmes.png',
        'stela.png'
    ].map(src => {
        const img = new Image();
        img.src = src;
        return img;
    });

    const cloudImages = [
        'cloud.png',
        'cloud2.png'
    ].map(src => {
        const img = new Image();
        img.src = src;
        return img;
    });

    let trex = {
        x: 50,
        y: 0,
        width: 50,
        height: 50,
        velocityY: 0,
        gravity: 1,
        isJumping: false
    };

    let cactus = {
        x: canvas.width,
        y: 0,
        width: 50,
        height: 50,
        image: cactusImages[0]
    };

    let clouds = [];

    // --- Dibujo ---
    function drawTrex() {
        ctx.drawImage(trexImg, trex.x, trex.y, trex.width, trex.height);
    }

    function drawCactus() {
        ctx.drawImage(cactus.image, cactus.x, cactus.y, cactus.width, cactus.height);
    }

    function drawClouds() {
        clouds.forEach(cloud => {
            ctx.drawImage(cloud.image, cloud.x, cloud.y, cloud.width, cloud.height);
        });
    }

    function drawScore() {
        ctx.fillStyle = 'black';
        ctx.font = '20px "Press Start 2P"';
        ctx.fillText(`Score: ${Math.floor(score)}`, 20, 30);
    }

    // --- Actualización ---
    function updateTrex() {
        if (trex.isJumping) {
            trex.y += trex.velocityY;
            trex.velocityY += trex.gravity;

            if (trex.y >= horizonHeight - trex.height) {
                trex.y = horizonHeight - trex.height;
                trex.isJumping = false;
            }
        }
    }

    function updateCactus() {
        cactus.x -= gameSpeed;
        if (cactus.x < -cactus.width) {
            cactus.x = canvas.width;
            cactus.image = cactusImages[Math.floor(Math.random() * cactusImages.length)];
            score += 5;
        }
    }

    function updateClouds() {
        clouds.forEach((cloud, index) => {
            cloud.x -= cloud.speed;
            if (cloud.x < -cloud.width) {
                clouds.splice(index, 1);
            }
        });

        if (clouds.length < 3 && Math.random() < 0.01) {
            clouds.push({
                x: canvas.width,
                y: Math.random() * (canvas.height / 2),
                width: 50 + Math.random() * 50,
                height: 50 + Math.random() * 50,
                speed: Math.random() * 1 + 0.2,
                image: cloudImages[Math.floor(Math.random() * cloudImages.length)]
            });
        }
    }

    function checkCollision() {
        if (
            trex.x < cactus.x + cactus.width &&
            trex.x + trex.width > cactus.x &&
            trex.y < cactus.y + cactus.height &&
            trex.y + trex.height > cactus.y
        ) {
            return true;
        }
        return false;
    }

    function update() {
        updateTrex();
        updateCactus();
        updateClouds();

        if (checkCollision()) {
            gameOver = true;
            showGameOverScreen();
        }
    }

    function render() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        drawClouds();
        drawTrex();
        drawCactus();
        drawScore();
    }

    function gameLoop() {
        if (!gameOver) {
            update();
            render();
            animationFrameId = requestAnimationFrame(gameLoop);
        }
    }

    function startGame() {
        trex.y = horizonHeight - trex.height;
        cactus.x = canvas.width;
        cactus.y = horizonHeight - cactus.height;
        score = 0;
        gameOver = false;
        gameOverOverlay.style.display = 'none';

        gameLoop();
    }

    function showGameOverScreen() {
        finalScore.textContent = Math.floor(score);
        gameOverOverlay.style.display = 'flex';
    }

    // --- Eventos ---
    document.addEventListener('keydown', (e) => {
        if (e.code === 'Space' && !trex.isJumping) {
            trex.isJumping = true;
            trex.velocityY = -20;
        }
    });

    canvas.addEventListener('click', () => {
        if (!trex.isJumping) {
            trex.isJumping = true;
            trex.velocityY = -20;
        }
    });

    restartButton.addEventListener('click', startGame);

    startGame();
</script>

</body>
</html>
